# ğŸ›¡ï¸ å¾®ä¿¡å•†æˆ·å·ç”³è¯‰ä¸“ä¸šåŠ©æ‰‹ï¼ˆMerchant Appeal Assistantï¼‰

> **AIé©±åŠ¨çš„å•†æˆ·å·ç”³è¯‰è§£å†³æ–¹æ¡ˆ** â€” åŸºäº DeepSeek å¤§æ¨¡å‹ï¼Œæ™ºèƒ½æ”¶é›†ä¿¡æ¯ã€ç²¾å‡†ç”Ÿæˆç”³è¯‰ææ–™ï¼Œå¸®åŠ©å•†æˆ·é«˜æ•ˆè§£å†³å¾®ä¿¡æ”¯ä»˜é£æ§é—®é¢˜ã€‚

[![Node.js](https://img.shields.io/badge/Node.js-18+-green.svg)](https://nodejs.org/)
[![React](https://img.shields.io/badge/React-18-blue.svg)](https://reactjs.org/)
[![DeepSeek](https://img.shields.io/badge/AI-DeepSeek-purple.svg)](https://deepseek.com/)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§

| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| ğŸ¤– **AIæ™ºèƒ½å¯¹è¯** | åŸºäºDeepSeekå¤§æ¨¡å‹ï¼ŒåƒçœŸäººé¡¾é—®ä¸€æ ·è‡ªç„¶å¯¹è¯ï¼Œç†è§£ç¢ç‰‡åŒ–ã€å£è¯­åŒ–è¡¨è¾¾ |
| ğŸ” **æ™ºèƒ½ä¿¡æ¯æå–** | æ‰€æœ‰å­—æ®µæå–100%ç”±DeepSeek APIå®Œæˆï¼Œç²¾å‡†æ— å¹»è§‰ï¼Œæ”¯æŒéšæ—¶ä¿®æ­£ |
| ğŸ“‹ **ä¸“ä¸šç”³è¯‰ææ–™** | è‡ªåŠ¨ç”Ÿæˆå¯ç›´æ¥æäº¤å¾®ä¿¡å®˜æ–¹çš„ç”³è¯‰æ–‡æ¡ˆï¼Œä¸¥è°¨åˆè§„ |
| ğŸ­ **è¡Œä¸šè‡ªé€‚åº”** | è¦†ç›–30+è¡Œä¸šçŸ¥è¯†åº“ï¼Œ10+æ•æ„Ÿè¡Œä¸šæ£€æµ‹ï¼Œè‡ªåŠ¨åŒ¹é…æœ€ä¼˜ç”³è¯‰ç­–ç•¥ |
| ğŸ“Š **æ¡ˆä¾‹æ™ºèƒ½åŒ¹é…** | å†…ç½®æˆåŠŸæ¡ˆä¾‹çŸ¥è¯†åº“ï¼ŒAIå‚è€ƒç›¸ä¼¼æ¡ˆä¾‹ç”Ÿæˆæ›´æœ‰é’ˆå¯¹æ€§çš„ææ–™ |
| âš¡ **æµå¼å“åº”** | SSEæµå¼ä¼ è¾“ï¼Œé¦–å­—èŠ‚å»¶è¿Ÿ<1ç§’ï¼Œå®æ—¶æ˜¾ç¤ºTokenç”¨é‡å’Œæˆæœ¬ |
| ğŸ”’ **åå¹»è§‰å››é‡é˜²çº¿** | å¯¹è¯prompt+æŠ¥å‘Šprompt+æå–prompt+æœåŠ¡ç«¯æ ¡éªŒï¼Œæœç»AIç¼–é€  |
| ğŸ’° **Tokenè®¡è´¹ç³»ç»Ÿ** | DeepSeekç»Ÿä¸€è®¡è´¹ï¼Œå……å€¼åä½¿ç”¨ï¼Œè‡ªåŠ¨æ‰£è´¹ï¼Œæ”¯æŒè‡ªå®šä¹‰API Key |
| ğŸ› ï¸ **ç®¡ç†åå°** | ç”¨æˆ·ç®¡ç†ã€ä¼šè¯ç›‘æ§ã€ç³»ç»Ÿé…ç½®ã€å……å€¼å®¡æ ¸ã€æ¡ˆä¾‹åº“ç»´æŠ¤ |

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    SSE Stream    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    API    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  React SPA  â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚  Express API â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â–º â”‚  MySQL   â”‚
â”‚  TailwindCSSâ”‚                  â”‚  è§„åˆ™å¼•æ“     â”‚           â”‚  æ•°æ®æŒä¹…åŒ–â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â–¼ DeepSeek API
                                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                 â”‚ å¯¹è¯ç”Ÿæˆ      â”‚
                                 â”‚ å­—æ®µæå–      â”‚
                                 â”‚ å®Œæˆåº¦è¯„ä¼°    â”‚
                                 â”‚ æŠ¥å‘Šç”Ÿæˆ      â”‚
                                 â”‚ è¡Œä¸šæ‰©å±•      â”‚
                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¦ é¡¹ç›®ç®€ä»‹

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ª**å•†ç”¨çº§å¾®ä¿¡å•†æˆ·å·ç”³è¯‰å’¨è¯¢/ææ–™ç”Ÿæˆ**åº”ç”¨ï¼ŒåŒ…å«ï¼š

- **å‰å°ç”¨æˆ·ç«¯**ï¼šä¼šè¯å¼AIå¯¹è¯æ”¶é›†ä¿¡æ¯ã€æ™ºèƒ½ç”³è¯‰ææ–™ç”Ÿæˆã€å……å€¼ä¸ç”¨é‡æŸ¥çœ‹
- **åå°ç®¡ç†ç«¯**ï¼šç”¨æˆ·ç®¡ç†ã€ä¼šè¯ç›‘æ§ã€ç³»ç»Ÿé…ç½®ã€å……å€¼å®¡æ ¸ã€æˆåŠŸæ¡ˆä¾‹çŸ¥è¯†åº“
- **åç«¯æœåŠ¡**ï¼šExpress + MySQL + DeepSeek APIï¼Œè§„åˆ™å¼•æ“å…œåº•ï¼Œæµå¼SSEå“åº”

è¿è¡Œå½¢æ€ï¼š

- æœ¬åœ°å¼€å‘ï¼šVite å‰ç«¯ï¼ˆ5173ï¼‰ä»£ç†åˆ° Node åç«¯ï¼ˆ3001ï¼‰
- ç”Ÿäº§éƒ¨ç½²ï¼šå‰ç«¯ `dist/` ç”± Nginx æ‰˜ç®¡ï¼Œåä»£ `/api/` åˆ° Node åç«¯
 
 ---
 
 ## 2. æŠ€æœ¯æ ˆ
 
 - **å‰ç«¯**ï¼šReact 18ã€React Routerã€Vite 6ã€TailwindCSS
 - **åç«¯**ï¼šNode.js (ESM)ã€Expressã€helmetã€corsã€express-rate-limitã€jsonwebtoken
 - **æ•°æ®åº“**ï¼šMySQLï¼ˆmysql2/promiseï¼‰
 - **AI**ï¼šDeepSeek Chat Completionsï¼ˆå¯ä½¿ç”¨ç³»ç»Ÿ Key æˆ–ç”¨æˆ·è‡ªå®šä¹‰ Keyï¼‰
 - **å…¶å®ƒ**ï¼š
   - `uuid`ï¼šä¼šè¯ID
   - `bcryptjs`ï¼šç®¡ç†å‘˜å¯†ç 
   - `html2canvas`ï¼šå‰ç«¯é¡µé¢æˆªå›¾/å¯¼å‡ºï¼ˆç”¨äºææ–™/å‡­è¯å±•ç¤ºç­‰åœºæ™¯ï¼‰
 
 ---
 
 ## 3. ç›®å½•ç»“æ„
 
 ```
 merchant-appeal/
 â”œâ”€â”€ public/
 â”œâ”€â”€ src/
 â”‚   â”œâ”€â”€ components/
 â”‚   â”œâ”€â”€ pages/
 â”‚   â”‚   â”œâ”€â”€ ChatPage.jsx        # ç”¨æˆ·ç«¯ä¸»é¡µé¢
 â”‚   â”‚   â”œâ”€â”€ AdminLogin.jsx      # åå°ç™»å½•
 â”‚   â”‚   â””â”€â”€ AdminPage.jsx       # åå°ç®¡ç†æ§åˆ¶å°
 â”‚   â”œâ”€â”€ App.jsx                 # å‰ç«¯è·¯ç”±ï¼š/ã€/adminã€/admin/dashboard
 â”‚   â”œâ”€â”€ main.jsx
 â”‚   â””â”€â”€ index.css
 â”œâ”€â”€ server/
 â”‚   â”œâ”€â”€ index.js                # åç«¯å…¥å£ï¼ˆExpressï¼‰
 â”‚   â”œâ”€â”€ db.js                   # DB åˆå§‹åŒ–/è¡¨ç»“æ„/æ•°æ®è®¿é—®å±‚ï¼ˆå«åŠ å¯†è¿ç§»ï¼‰
 â”‚   â”œâ”€â”€ ai.js                   # DeepSeek è°ƒç”¨ä¸åå¤‡è§„åˆ™å¼•æ“ï¼ˆéƒ¨åˆ†æµç¨‹ï¼‰
 â”‚   â”œâ”€â”€ localAI.js              # æœ¬åœ°è§„åˆ™å¼•æ“ï¼šä¿¡æ¯æ”¶é›†/è¡Œä¸šçŸ¥è¯†/æ•æ„Ÿè¡Œä¸šè¯†åˆ«
 â”‚   â”œâ”€â”€ knowledgeBase.js        # å†…ç½®çŸ¥è¯†åº“ï¼šè¿è§„ç±»å‹/é£é™©/ææ–™æ¸…å•/æ¡ˆä¾‹åŒ¹é…
 â”‚   â”œâ”€â”€ tokenizer.js            # token ç»Ÿè®¡ä¸è®¡è´¹
 â”‚   â””â”€â”€ crypto.js               # æ•æ„Ÿä¿¡æ¯åŠ è§£å¯†ï¼ˆé…åˆ ENCRYPT_KEYï¼‰
 â”œâ”€â”€ dist/                       # å‰ç«¯æ„å»ºäº§ç‰©ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
 â”œâ”€â”€ .env.example
 â”œâ”€â”€ DEPLOY.md                   # å®å¡”é¢æ¿éƒ¨ç½²æŒ‡å—
 â”œâ”€â”€ vite.config.js
 â””â”€â”€ package.json
 ```
 
 ---
 
 ## 4. æœ¬åœ°å¼€å‘
 
 ### 4.1 ç¯å¢ƒè¦æ±‚
 
 - Node.jsï¼šå»ºè®® 18+
 - MySQLï¼š5.7+ æˆ– 8.0+
 
 ### 4.2 å®‰è£…ä¾èµ–
 
 ```bash
 npm install
 ```
 
 ### 4.3 é…ç½®ç¯å¢ƒå˜é‡
 
 å¤åˆ¶ `.env.example` ä¸º `.env`ï¼ŒæŒ‰ä½ çš„ç¯å¢ƒå¡«å†™ï¼š
 
 - æ•°æ®åº“ï¼š`DB_HOST` / `DB_PORT` / `DB_USER` / `DB_PASSWORD` / `DB_NAME`
 - å®‰å…¨ï¼š`ENCRYPT_KEY`ï¼ˆAES-256 32å­—èŠ‚åå…­è¿›åˆ¶=64ä½ hexï¼‰ã€`JWT_SECRET`
 - æœåŠ¡ï¼š`PORT`ï¼ˆé»˜è®¤ 3001ï¼‰ã€`CORS_ORIGINS`
 - é™é€Ÿï¼š`RATE_LIMIT_MAX`ã€`CHAT_RATE_LIMIT_MAX`
 
 **æ³¨æ„**ï¼šåç«¯å¯åŠ¨æ—¶å¦‚æœ `JWT_SECRET` æœªé…ç½®ï¼Œä¼šæç¤ºè­¦å‘Šå¹¶ä½¿ç”¨ä¸å®‰å…¨é»˜è®¤å€¼ï¼ˆä»…å»ºè®®æœ¬åœ°ä¸´æ—¶è°ƒè¯•ï¼‰ã€‚
 
 ### 4.4 å¯åŠ¨å¼€å‘æœåŠ¡
 
 ```bash
 npm run dev
 ```
 
 - å‰ç«¯ï¼š`http://localhost:5173`
 - åç«¯ï¼š`http://localhost:3001`
 
 Vite å·²åœ¨ `vite.config.js` ä¸­é…ç½®ä»£ç†ï¼š`/api` -> `http://localhost:3001`ã€‚
 
 ---
 
 ## 5. æ„å»ºä¸ç”Ÿäº§å¯åŠ¨
 
 ```bash
 npm run build
 npm run start
 ```
 
 - `build`ï¼šç”Ÿæˆ `dist/`
 - `start`ï¼šä»…å¯åŠ¨åç«¯ï¼ˆç”Ÿäº§ç¯å¢ƒé€šå¸¸ç”± Nginx æ‰˜ç®¡ `dist/` å¹¶åä»£ APIï¼‰
 
 ---
 
 ## 6. ç¯å¢ƒå˜é‡è¯´æ˜ï¼ˆ.envï¼‰
 
 ä¸ `.env.example` / `DEPLOY.md` ä¿æŒä¸€è‡´ï¼Œæ ¸å¿ƒé¡¹å¦‚ä¸‹ï¼š
 
 - **æ•°æ®åº“**
   - `DB_HOST` / `DB_PORT` / `DB_USER` / `DB_PASSWORD` / `DB_NAME`
   - `DB_CONNECTION_LIMIT`
 - **å®‰å…¨**
   - `ENCRYPT_KEY`ï¼šç”¨äºåŠ å¯†å­˜å‚¨æ•æ„Ÿé…ç½®ï¼ˆå¦‚ DeepSeek Keyã€æ”¯ä»˜é…ç½®ã€ç”¨æˆ·æ‰‹æœºå·/IP ç­‰ï¼‰
   - `JWT_SECRET`ï¼šç”¨äºç­¾å‘ç®¡ç†å‘˜/ç”¨æˆ· JWT
   - `JWT_EXPIRES_IN`ï¼šé»˜è®¤ `24h`
 - **æœåŠ¡**
   - `PORT`ï¼šåç«¯ç«¯å£ï¼ˆé»˜è®¤ 3001ï¼‰
   - `NODE_ENV`ï¼š`production`/`development`
   - `CORS_ORIGINS`ï¼šå…è®¸è·¨åŸŸæ¥æºï¼ˆç”Ÿäº§å»ºè®®é…ç½®åŸŸåï¼Œæ”¯æŒé€—å·åˆ†éš”ï¼‰
 - **é™é€Ÿ**
   - `RATE_LIMIT_MAX`ï¼šå…¨å±€é™é€Ÿ
   - `CHAT_RATE_LIMIT_MAX`ï¼šèŠå¤©æ¥å£é™é€Ÿ
 
 ---
 
 ## 7. æ ¸å¿ƒæµç¨‹ä¸æ•°æ®æµï¼ˆæ¦‚è§ˆï¼‰
 
 ### 7.1 ç”¨æˆ·ä¾§
 
 - ç”¨æˆ·åœ¨ `/`ï¼ˆ`ChatPage`ï¼‰å®Œæˆæ³¨å†Œ/ç™»å½•ã€‚
 - å‘èµ·èŠå¤©ï¼š`POST /api/chat`
   - å¼ºåˆ¶è¦æ±‚å·²ç™»å½•å¹¶å…·å¤‡ä»˜è´¹èƒ½åŠ›ï¼ˆå®˜æ–¹ä½™é¢>0 æˆ–è‡ªå®šä¹‰ API Keyï¼‰ã€‚
   - åˆ›å»ºæˆ–ç»­ç”¨ `sessionId`ã€‚
   - åç«¯å°†æ¶ˆæ¯å†™å…¥ `messages`ã€‚
   - è°ƒç”¨ DeepSeekï¼ˆç³»ç»Ÿ Key æˆ–ç”¨æˆ·è‡ªå®šä¹‰ Keyï¼‰ï¼Œå¹¶ä¾æ® token è®¡è´¹æ‰£ä½™é¢ï¼ˆå®˜æ–¹æ¨¡å¼ï¼‰ã€‚
 - ä¿¡æ¯æ”¶é›†ï¼šä¼šè¯ `sessions.collected_data` ä¸ `sessions.step` å­˜å‚¨æ”¶é›†è¿›åº¦ã€‚
 - æ·±åº¦åˆ†æï¼š`GET /api/sessions/:id/deep-analysis`ï¼ˆåŒ…å«ä¼šå‘˜/æœˆé¢åº¦é€»è¾‘ä¸ç¼“å­˜/è½åº“ï¼‰ã€‚
 - ç”³è¯‰æ–‡æ¡ˆï¼š`POST /api/sessions/:id/generate-appeal-text` ç”Ÿæˆå¹¶ä¿å­˜ `appeal_texts`ã€‚
 
 ### 7.2 ç®¡ç†å‘˜ä¾§
 
 - ç™»å½•ï¼š`POST /api/admin/login` è·å–ç®¡ç†å‘˜ JWTã€‚
 - è¿›å…¥ `/admin/dashboard` ç®¡ç†ç”¨æˆ·/ä¼šè¯/é…ç½®/å……å€¼è®¢å•/æ¡ˆä¾‹åº“ã€‚
 
 ---
 
 ## 8. åç«¯ API æ¦‚è§ˆï¼ˆserver/index.jsï¼‰
 
 ä»…åˆ—å‡ºä¸»è¦ç«¯ç‚¹ï¼Œå…·ä½“å…¥å‚/è¿”å›è¯·ä»¥ä»£ç ä¸ºå‡†ã€‚
 
 ### 8.1 ç”¨æˆ·ç›¸å…³
 
 - `POST /api/user/register`
 - `POST /api/user/login`
 - `GET /api/user/:id`ï¼ˆéœ€ç”¨æˆ· JWTï¼Œä»…æœ¬äººï¼‰
 - `GET /api/user/:id/sessions`ï¼ˆéœ€ç”¨æˆ· JWTï¼Œä»…æœ¬äººï¼‰
 - `PUT /api/user/:id/api-mode`ï¼ˆéœ€ç”¨æˆ· JWTï¼Œä»…æœ¬äººï¼›`official`/`custom`ï¼‰
 - `GET /api/user/:id/usage`ï¼ˆéœ€ç”¨æˆ· JWTï¼Œä»…æœ¬äººï¼›token ç”¨é‡/ç»Ÿè®¡/å……å€¼è®°å½•ï¼‰
 
 ### 8.2 èŠå¤©ä¸ä¼šè¯
 
 - `POST /api/chat`ï¼ˆèŠå¤©ï¼›éœ€è¦ `userId`ï¼›å¹¶æ ¡éªŒä»˜è´¹èƒ½åŠ›ï¼‰
 - `POST /api/chat/stream`ï¼ˆSSE æµå¼èŠå¤©ï¼‰
 - `GET /api/sessions/lookup`ï¼ˆæœç´¢ä¼šè¯ï¼›å¯é€‰ç”¨æˆ· JWTï¼‰
 - `GET /api/sessions/:id/messages`ï¼ˆä¼šè¯æ¶ˆæ¯ï¼›å¯é€‰ç”¨æˆ· JWTï¼Œè‹¥ä¼šè¯ç»‘å®šç”¨æˆ·åˆ™æ ¡éªŒå½’å±ï¼‰
 - `GET /api/sessions/:id/info`ï¼ˆä¼šè¯æ”¶é›†ä¿¡æ¯ä¸å­—æ®µå…ƒæ•°æ®ï¼‰
 - `PUT /api/sessions/:id/field`ï¼ˆæ›´æ–°æŸä¸ªæ”¶é›†å­—æ®µï¼‰
 - `GET /api/sessions/:id/analysis`ï¼ˆæœ¬åœ°åˆ†ææ‘˜è¦ï¼Œä¸æ¶ˆè€— DeepSeekï¼‰
 - `GET /api/sessions/:id/deep-analysis`ï¼ˆDeepSeek æ·±åº¦åˆ†æï¼Œå«ä¼šå‘˜/æœˆé¢åº¦é€»è¾‘ï¼‰
 - `GET /api/sessions/:id/deep-analysis-result`ï¼ˆè·å–å·²ä¿å­˜çš„æ·±åº¦åˆ†æç»“æœï¼‰
 
 ### 8.3 ç”³è¯‰æ–‡æ¡ˆ
 
 - `POST /api/sessions/:id/generate-appeal-text`ï¼ˆç”Ÿæˆå¹¶ä¿å­˜ï¼Œæ”¯æŒ `force` é‡æ–°ç”Ÿæˆï¼‰
 - `GET /api/sessions/:id/appeal-text`ï¼ˆè·å–å·²ç”Ÿæˆæ–‡æ¡ˆï¼‰
 
 ### 8.4 å……å€¼
 
 - `GET /api/recharge/config`ï¼ˆå…¬å¼€ï¼šé‡‘é¢é€‰é¡¹ã€äºŒç»´ç ã€è¯´æ˜ï¼‰
 - `POST /api/recharge`ï¼ˆç”¨æˆ·æäº¤å……å€¼è®¢å•ï¼›éœ€ç”¨æˆ· JWTï¼‰
 - `GET /api/recharge/orders`ï¼ˆç”¨æˆ·æŸ¥çœ‹è‡ªå·±çš„å……å€¼è®°å½•ï¼›éœ€ç”¨æˆ· JWTï¼‰
 
 ### 8.5 ç®¡ç†å‘˜
 
 - `POST /api/admin/login`
 - `PUT /api/admin/password`ï¼ˆéœ€ç®¡ç†å‘˜ JWTï¼‰
 - `GET /api/admin/users`ï¼ˆéœ€ç®¡ç†å‘˜ JWTï¼‰
 - `DELETE /api/admin/users/:id`ï¼ˆéœ€ç®¡ç†å‘˜ JWTï¼‰
 - `POST /api/admin/users/:id/balance`ï¼ˆéœ€ç®¡ç†å‘˜ JWTï¼›è°ƒæ•´ä½™é¢ï¼‰
 - `GET /api/admin/stats`ï¼ˆéœ€ç®¡ç†å‘˜ JWTï¼‰
 - `GET /api/admin/sessions`ï¼ˆéœ€ç®¡ç†å‘˜ JWTï¼‰
 - `GET /api/admin/sessions/:id/messages`ï¼ˆéœ€ç®¡ç†å‘˜ JWTï¼‰
 - `DELETE /api/admin/sessions/:id`ï¼ˆéœ€ç®¡ç†å‘˜ JWTï¼‰
 - `POST /api/admin/sessions/:id/reply`ï¼ˆéœ€ç®¡ç†å‘˜ JWTï¼›ç®¡ç†å‘˜äººå·¥å›å¤ï¼‰
 
 ### 8.6 å……å€¼è®¢å•ç®¡ç†ï¼ˆç®¡ç†å‘˜ï¼‰
 
 - `GET /api/admin/recharge-orders`
 - `PUT /api/admin/recharge-orders/:id/confirm`
 - `PUT /api/admin/recharge-orders/:id/reject`
 
 ### 8.7 æ¡ˆä¾‹çŸ¥è¯†åº“ï¼ˆç®¡ç†å‘˜ï¼‰
 
 - `GET /api/admin/cases`
 - `GET /api/admin/cases/:id`
 - `POST /api/admin/cases/from-session`
 - `POST /api/admin/cases`
 - `PUT /api/admin/cases/:id`
 - `DELETE /api/admin/cases/:id`
 
 ---
 
 ## 9. æ•°æ®åº“è¯´æ˜ï¼ˆserver/db.jsï¼‰
 
 åç«¯å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨ `initDatabase()`ï¼š
 
 - åˆ›å»ºæ•°æ®åº“ï¼ˆå¦‚ä¸å­˜åœ¨ï¼‰
 - åˆ›å»º/è¿ç§»è¡¨ç»“æ„
 - åˆå§‹åŒ–ç³»ç»Ÿé…ç½®é¡¹ä¸æ”¯ä»˜é…ç½®é¡¹
 - åˆå§‹åŒ–é»˜è®¤ç®¡ç†å‘˜ï¼ˆé¦–æ¬¡è¿è¡Œï¼‰
 
 ### 9.1 ä¸»è¦è¡¨
 
 - `sessions`
   - `id`ï¼šä¼šè¯ IDï¼ˆuuidï¼‰
   - `user_id`ï¼šå½’å±ç”¨æˆ·ï¼ˆå¯ä¸ºç©ºï¼Œå†å²å…¼å®¹ï¼‰
   - `collected_data`ï¼šJSONï¼ˆä¿¡æ¯æ”¶é›†ç»“æœï¼‰
   - `step`ï¼šä¿¡æ¯æ”¶é›†è¿›åº¦
   - `deep_analysis_result`ï¼šç¼“å­˜æ·±åº¦åˆ†æç»“æœ
 - `messages`
   - `session_id`ã€`role`ï¼ˆuser/assistant/adminï¼‰ã€`content`
 - `users`
   - `phone`/`nickname`/`last_ip` ç­‰å­—æ®µé‡‡ç”¨åŠ å¯†å­˜å‚¨
   - `phone_hash`ï¼šç”¨äºå”¯ä¸€ç´¢å¼•ä¸æŸ¥è¯¢ï¼ˆé¿å…æ˜æ–‡æ‰‹æœºå·ç´¢å¼•ï¼‰
   - `balance`ï¼šå®˜æ–¹æ¨¡å¼æ‰£è´¹ä½™é¢
   - `api_mode`ï¼š`official` / `custom`
   - `custom_api_key`ï¼šåŠ å¯†å­˜å‚¨
 - `system_config`
   - ç«™ç‚¹ä¸ AI é…ç½®ï¼ˆ`deepseek_api_key` ä¸ºæ•æ„Ÿå­—æ®µï¼Œå­˜å‚¨æ—¶åŠ å¯†ï¼‰
 - `payment_config`
   - å¾®ä¿¡/æ”¯ä»˜å®æ”¯ä»˜é…ç½®ï¼ˆæ•æ„Ÿå­—æ®µåŠ å¯†ï¼‰
 - `recharge_orders`
   - ç”¨æˆ·æäº¤å……å€¼è®¢å•ï¼Œç®¡ç†å‘˜ç¡®è®¤åå…¥è´¦
 - `token_usage`
   - token ä¸è´¹ç”¨æ˜ç»†
 - `appeal_texts`
   - ç”³è¯‰æ–‡æ¡ˆç¼“å­˜
 - `success_cases`
   - æˆåŠŸæ¡ˆä¾‹çŸ¥è¯†åº“
 - `user_actions`
   - ç”¨æˆ·è¡Œä¸ºè¿½è¸ªï¼ˆIP åŠ å¯†å­˜å‚¨ï¼‰
 
 ### 9.2 é»˜è®¤ç®¡ç†å‘˜
 
 é¦–æ¬¡åˆå§‹åŒ–ä¼šåˆ›å»ºï¼š
 
 - ç”¨æˆ·åï¼š`admin`
 - å¯†ç ï¼š`admin123`
 
 **ä¸Šçº¿åå¿…é¡»ç¬¬ä¸€æ—¶é—´åœ¨åå°ä¿®æ”¹é»˜è®¤å¯†ç ã€‚**
 
 ---
 
 ## 10. è®¡è´¹ä¸é…é¢ï¼ˆå…³é”®è§„åˆ™ï¼‰
 
 - èŠå¤© `POST /api/chat`
   - **å®˜æ–¹æ¨¡å¼**ï¼šæŒ‰ token è®¡è´¹æ‰£ä½™é¢ï¼ˆå€ç‡å¯åœ¨ç³»ç»Ÿé…ç½®ä¸­è°ƒèŠ‚ `cost_multiplier`ï¼‰ã€‚
   - **è‡ªå®šä¹‰æ¨¡å¼**ï¼šä½¿ç”¨ç”¨æˆ·è‡ªå®šä¹‰ DeepSeek API Keyï¼Œä¸æ‰£å¹³å°ä½™é¢ã€‚
 - æ·±åº¦åˆ†æ `GET /api/sessions/:id/deep-analysis`
   - å­˜åœ¨â€œä¼šå‘˜/æœˆåº¦æ¬¡æ•°ï¼ˆ100æ¬¡ï¼‰â€ç›¸å…³é€»è¾‘ï¼ˆä»¥ä»£ç å®ç°ä¸ºå‡†ï¼‰ã€‚
 
 ---
 
 ## 11. éƒ¨ç½²
 
 ç”Ÿäº§éƒ¨ç½²å»ºè®®æŒ‰ `DEPLOY.md`ï¼ˆå®å¡”é¢æ¿ï¼‰æ‰§è¡Œã€‚æ ¸å¿ƒè¦ç‚¹ï¼š
 
 - å‰ç«¯ï¼š`npm run build` ç”Ÿæˆ `dist/`ï¼Œç”± Nginx æ‰˜ç®¡
 - åç«¯ï¼šPM2 å®ˆæŠ¤è¿è¡Œ `server/index.js`
 - Nginxï¼šåä»£ `/api/` åˆ° Nodeï¼ˆ3001ï¼‰å¹¶å¤„ç† SPA `try_files`
 - `.env`ï¼šå¿…é¡»æ­£ç¡®é…ç½® DB ä¸å®‰å…¨å¯†é’¥
 
 ---
 
 ## 12. å¸¸è§é—®é¢˜ï¼ˆæ’é”™ï¼‰
 
 - **é¡µé¢ç©ºç™½**
   - æ£€æŸ¥ `dist/` æ˜¯å¦å­˜åœ¨
   - Nginx root æ˜¯å¦æŒ‡å‘ `dist/`
 - **æ¥å£ 502**
   - æ£€æŸ¥ Node æ˜¯å¦è¿è¡Œï¼ˆPM2ï¼‰
   - æ£€æŸ¥ç«¯å£ã€`.env` æ˜¯å¦æ­£ç¡®
 - **æ•°æ®åº“åˆå§‹åŒ–å¤±è´¥**
   - æ£€æŸ¥ MySQL è´¦å·æƒé™ä¸ `DB_*` é…ç½®
 - **AI ä¸å›å¤ / åªæç¤ºæœªé…ç½®**
   - åå° `system_config.deepseek_api_key` æ˜¯å¦å·²è®¾ç½®
   - ä½™é¢/è‡ªå®šä¹‰ Key æ˜¯å¦æ»¡è¶³ä½¿ç”¨æ¡ä»¶
 
 ---
 
 ## 13. å®‰å…¨æ³¨æ„äº‹é¡¹
 
 - ä¸è¦æŠŠ `.env` æäº¤åˆ°ä»“åº“ã€‚
 - ç”Ÿäº§ç¯å¢ƒåŠ¡å¿…é…ç½®å¼ºéšæœº `ENCRYPT_KEY` ä¸ `JWT_SECRET`ã€‚
 - é»˜è®¤ç®¡ç†å‘˜å¯†ç å¿…é¡»ä¿®æ”¹ã€‚
 - `CORS_ORIGINS` ç”Ÿäº§ç¯å¢ƒå»ºè®®é…ç½®ä¸ºç«™ç‚¹åŸŸåï¼ˆä¸è¦é•¿æœŸ `*`ï¼‰ã€‚
